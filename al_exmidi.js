(()=>{"use strict";var e,r={210:(e,r,t)=>{var n=t(951);(0,n.enable_debug)("debug"),(0,n.END_OF_MAIN)(),(0,n.init_allegro_ts)("canvas_id",(function(){var e,r,t,l,a,o,i;return l=this,a=void 0,i=function(){var l,a,o,i,s,c,u,_,f,d,p,m,v,h;return function(e,r){var t,n,l,a,o={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(l=2&a[0]?n.return:a[0]?n.throw||((l=n.return)&&l.call(n),0):n.next)&&!(l=l.call(n,a[1])).done)return l;switch(n=0,l&&(a=[2&a[0],l.value]),a[0]){case 0:case 1:l=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((l=(l=o.trys).length>0&&l[l.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!l||a[1]>l[0]&&a[1]<l[3])){o.label=a[1];break}if(6===a[0]&&o.label<l[1]){o.label=l[1],l=a;break}if(l&&o.label<l[2]){o.label=l[2],o.ops.push(a);break}l[2]&&o.ops.pop(),o.trys.pop();continue}a=r.call(e,o)}catch(e){a=[6,e],n=0}finally{t=l=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}(this,(function(g){switch(g.label){case 0:return l=null,a=0,o=0,i=0,s=0,c=0,u=0,_=0,f=0,d=0,p=0,m=!1,v=0,h=["","assets/sample.mid"],0!=(0,n.allegro_init)()?[2,1]:((0,n.install_keyboard)(),(0,n.install_timer)(),0!=(0,n.install_sound)(n.DIGI_AUTODETECT,n.MIDI_AUTODETECT,null)?((0,n.allegro_message)("Error initialising sound system\n%s\n",n.allegro_error),[2,1]):[4,(0,n.load_midi)(null!==(e=h[1])&&void 0!==e?e:"")]);case 1:return l=g.sent(),[4,(0,n.allegro_ready)()];case 2:if(g.sent(),!l)return(0,n.allegro_message)("Error reading MIDI file '%s'\n",null!==(r=h[1])&&void 0!==r?r:""),[2,1];if(a=(0,n.get_midi_length)(l),i=-n.midi_pos,0!=(0,n.set_gfx_mode)(n.GFX_AUTODETECT,320,200,0,0)&&0!=(0,n.set_gfx_mode)(n.GFX_SAFE,320,200,0,0))return(0,n.set_gfx_mode)(n.GFX_TEXT,0,0,0,0),(0,n.allegro_message)("Unable to set any graphic mode\n%s\n",n.allegro_error),[2,1];(0,n.set_display_switch_mode)(n.SWITCH_BACKGROUND)&&(0,n.set_display_switch_mode)(n.SWITCH_BACKAMNESIA),(0,n.set_palette)(n.desktop_palette),d=(0,n.makecol)(255,255,255),p=(0,n.makecol)(0,0,0),(0,n.clear_to_color)(n.screen,d),f=(0,n.text_height)(n.font),c=n.SCREEN_W/2,(0,n.textprintf_centre_ex)(n.screen,n.font,c,n.SCREEN_H/3,p,-1,"Driver: %s",n.midi_driver.name),(0,n.textprintf_centre_ex)(n.screen,n.font,c,n.SCREEN_H/2,p,-1,"Playing %s",null!==(t=h[1])&&void 0!==t?t:""),(0,n.play_midi)(l,!0),u=2*n.SCREEN_H/3,_=(0,n.text_length)(n.font,"0000:00 / 0000:00"),g.label=3;case 3:if(v)return[3,8];g.label=4;case 4:return(0,n.keypressed)()?[4,(0,n.readkey)()]:[3,6];case 5:return(255&g.sent())==n.KEY_P?(m=!m)?((0,n.midi_pause)(),(0,n.textprintf_centre_ex)(n.screen,n.font,c,u+3*f,p,-1,"P A U S E D")):((0,n.midi_resume)(),(0,n.rectfill)(n.screen,c-_/2,u+3*f,c+_/2,u+4*f,d)):v=1,[3,4];case 6:return o=n.midi_time,s=n.midi_pos,(0,n.rectfill)(n.screen,c-_/2,u,c+_/2,u+2*f,d),(0,n.textprintf_centre_ex)(n.screen,n.font,c,u,p,-1,"%d:%02d / %d:%02d",o/60,o%60,a/60,a%60),(0,n.textprintf_centre_ex)(n.screen,n.font,c,u+f,p,-1,"beat %d / %d",s,i),[4,(0,n.rest)(100)];case 7:return g.sent(),[3,3];case 8:return(0,n.destroy_midi)(l),[2,0]}}))},new((o=void 0)||(o=Promise))((function(e,r){function t(e){try{s(i.next(e))}catch(e){r(e)}}function n(e){try{s(i.throw(e))}catch(e){r(e)}}function s(r){var l;r.done?e(r.value):(l=r.value,l instanceof o?l:new o((function(e){e(l)}))).then(t,n)}s((i=i.apply(l,a||[])).next())}))}))}},t={};function n(e){var l=t[e];if(void 0!==l)return l.exports;var a=t[e]={exports:{}};return r[e].call(a.exports,a,a.exports,n),a.exports}n.m=r,e=[],n.O=(r,t,l,a)=>{if(!t){var o=1/0;for(u=0;u<e.length;u++){for(var[t,l,a]=e[u],i=!0,s=0;s<t.length;s++)(!1&a||o>=a)&&Object.keys(n.O).every((e=>n.O[e](t[s])))?t.splice(s--,1):(i=!1,a<o&&(o=a));if(i){e.splice(u--,1);var c=l();void 0!==c&&(r=c)}}return r}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[t,l,a]},n.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return n.d(r,{a:r}),r},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={547:0};n.O.j=r=>0===e[r];var r=(r,t)=>{var l,a,[o,i,s]=t,c=0;if(o.some((r=>0!==e[r]))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(s)var u=s(n)}for(r&&r(t);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},t=self.webpackChunkallegro_ts_examples=self.webpackChunkallegro_ts_examples||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var l=n.O(void 0,[512],(()=>n(210)));l=n.O(l)})();
//# sourceMappingURL=al_exmidi.js.map